# echo-news 要件定義書

## 目的

複数のニュースAPIから情報を集約し，情報の重複を排除して，重要なトピックだけを効率的に閲覧できるCLIツールを提供する．
ターミナル上で完結する軽量な体験を重視し，APIキー管理や拡張性も考慮した設計とする．

---

## 機能要件

### FR-01: マルチプロバイダ対応

- GNews API および Currents API の両方から最新記事を取得できること．
- 各プロバイダは独立したモジュールとして実装し，共通インターフェースを満たすこと．
- プロバイダごとに取得件数を設定できること（デフォルト: 各20件）．

### FR-02: 重複排除

- URLが完全一致する記事は即座に同一記事と判定し，1件に統合すること．
- タイトルの類似度スコア（Levenshtein距離ベース）を計算し，閾値（デフォルト: 0.85）を超えた場合も重複とみなすこと．
- 重複と判定された記事群から，本文が最も長い（情報量が多い）記事を代表として採用すること．

### FR-03: CLI UI

- 記事タイトル，ソース名，公開日時，概要をターミナル上にカラー表示すること．
- デフォルトでは全プロバイダから集約した結果を表示する．
- `--topic` オプションでキーワードを指定し，関連記事に絞り込めること．
- `--limit` オプションで表示件数を指定できること（デフォルト: 10件）．
- `--source` オプションで特定プロバイダのみに絞り込めること（`gnews` / `currents` / `all`）．

### FR-04: 設定管理

- APIキーをプロジェクトルートの `.env` ファイルで管理できること．
- `.env` が存在しない，またはキーが未設定の場合，わかりやすいエラーメッセージを表示して終了すること．

---

## 非機能要件

### NFR-01: 拡張性

- 新しいニュースプロバイダを追加する際，既存コードの変更を最小限に抑えられること．
- `BaseProvider` を継承するクラスを追加するだけで対応できる設計とすること．

### NFR-02: 安全性

- APIキーをコード内にハードコードしないこと．
- `.env` ファイルを `.gitignore` に必ず追加すること．

### NFR-03: ユーザビリティ

- コマンド実行から結果表示まで体感3秒以内を目標とする（API応答速度に依存）．
- API呼び出し中はスピナーなどの視覚的フィードバックを表示すること．
- エラー発生時は原因と対処法を簡潔に示すこと．

### NFR-04: 保守性

- TypeScript で実装し，型安全性を担保すること．
- `tsconfig.json` は strict モードを有効にすること．

---

## 前提・制約

- 実行環境: Node.js v18 以上
- 対象OS: macOS / Linux / Windows（WSL2含む）
- 使用API: GNews API（無料プラン: 日100リクエスト上限，最大10件/req），Currents API（無料プラン: 日20リクエスト上限）
- ネットワーク接続が必要（オフライン動作は対象外）
